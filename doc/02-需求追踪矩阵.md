# EduNexus AI 需求追踪矩阵（RTM）

说明：

1. 本矩阵用于确保“需求不丢失、实现可追踪、验收可落地”。
2. 状态字段取值：`未开始` / `开发中` / `已完成` / `已验收`。
3. 核心业务需求状态可按实际实现回写；新增平台质量需求可先标注 `未开始/开发中`。
4. **需求描述以 `01-PRD` 为准，本表只做映射追踪，不定义需求。**

| 需求ID | 来源（old） | 页面/路由 | API（OpenAPI） | 数据对象 | 验收用例ID | 状态 |
|---|---|---|---|---|---|---|
| R-AUTH-01 | 旧登录接口文档 | `/register` | `POST /auth/register` | `users` | TC-AUTH-REG-001 | 已完成 |
| R-AUTH-02 | 旧登录接口文档 | `/register` | `POST /auth/register` | `users` | TC-AUTH-REG-002 | 已完成 |
| R-AUTH-03 | 旧登录接口文档 | `/login` | `POST /auth/login` | `users` | TC-AUTH-LOGIN-001 | 已完成 |
| R-AUTH-04 | 旧登录接口文档 | 顶栏退出 | `POST /auth/logout` | `refresh_tokens` | TC-AUTH-LOGOUT-001 | 已完成 |
| R-AUTH-05 | 全部 old 文档 | 全部受保护路由 | 全部受保护接口 | N/A | TC-AUTH-JWT-001 | 已完成 |
| R-AUTH-06 | 旧学生端接口文档 | 学生端全部页面 | 学生端全部接口 | N/A | TC-AUTH-CLAIM-001 | 已完成 |
| R-AUTH-07 | 新增最佳实践 | 个人中心 | `GET /auth/me` | `users` | TC-AUTH-ME-001 | 已完成 |
| R-CHAT-01 | 旧学生端接口文档 | `/student/chat` | `POST /student/chat/session` | `chat_sessions` | TC-CHAT-NEW-001 | 已完成 |
| R-CHAT-02 | 旧学生端接口文档 | `/student/chat` | `GET /student/chat/sessions` | `chat_sessions` | TC-CHAT-LIST-001 | 已完成 |
| R-CHAT-03 | 旧学生端接口文档 | `/student/chat/:id` | `GET /student/chat/session/{sessionId}` | `chat_sessions`,`chat_messages` | TC-CHAT-DETAIL-001 | 已完成 |
| R-CHAT-04 | 旧学生端接口文档 | `/student/chat/:id` | `POST /student/chat/session/{sessionId}/message` | `chat_messages`,`knowledge_chunks` | TC-CHAT-SEND-001 | 已完成 |
| R-CHAT-05 | 旧学生端接口文档 | `/student/chat` | `DELETE /student/chat/session/{sessionId}` | `chat_sessions` | TC-CHAT-DEL-001 | 已完成 |
| R-CHAT-06 | 旧学生端接口文档 | `/student/chat` | 创建会话后端规则 | `chat_sessions.title` | TC-CHAT-TITLE-001 | 已完成 |
| R-CHAT-07 | 旧学生端接口文档 | `/student/chat/:id` | 所有 sessionId 接口 | `chat_sessions.student_id` | TC-CHAT-AUTH-001 | 已完成 |
| R-CHAT-08 | 旧软件开发与说明文档 | `/student/chat/:id` | `POST /student/chat/session/{sessionId}/message` | `documents`,`knowledge_chunks` | TC-CHAT-RAG-001 | 已完成 |
| R-CHAT-09 | 旧软件开发与说明文档 | `/student/chat/:id` | AI 服务内部路由 | `llm_router_config` | TC-CHAT-ROUTER-001 | 已完成 |
| R-EX-01 | 旧学生端接口文档 | `/student/exercise` | `GET /student/exercise/questions` | `questions` | TC-EX-QUERY-001 | 已完成 |
| R-EX-02 | 旧学生端接口文档 | `/student/exercise` | `POST /student/exercise/submit` | `exercise_records`,`exercise_record_items` | TC-EX-SUBMIT-001 | 已完成 |
| R-EX-03 | 旧学生端接口文档 | `/student/exercise/result` | `POST /student/exercise/submit` | `exercise_records`,`exercise_record_items` | TC-EX-SCORE-001 | 已完成 |
| R-EX-04 | 旧学生端接口文档 | `/student/exercise/analysis/:recordId` | `GET /student/exercise/{recordId}/analysis` | `exercise_record_items`,`questions` | TC-EX-ANALYSIS-001 | 已完成 |
| R-EX-05 | 旧学生端接口文档 | `/student/wrong-book` | `POST /student/exercise/submit`（自动写入） | `wrong_book` | TC-EX-WB-AUTO-001 | 已完成 |
| R-EX-06 | 旧学生端接口文档 | `/student/wrong-book` | `GET /student/exercise/wrong-questions` | `wrong_book`,`questions` | TC-WB-LIST-001 | 已完成 |
| R-EX-07 | 旧学生端接口文档 | `/student/wrong-book` | `DELETE /student/exercise/wrong-questions/{questionId}` | `wrong_book.status` | TC-WB-DEL-001 | 已完成 |
| R-EX-08 | 旧学生端接口文档 | `/student/exercise/records` | `GET /student/exercise/records` | `exercise_records` | TC-EX-RECORDS-001 | 已完成 |
| R-EX-09 | 旧学生端接口文档 | `/student/exercise/analysis/:recordId` | `GET /student/exercise/{recordId}/analysis` | `teacher_suggestions` | TC-EX-SUGGESTION-001 | 已完成 |
| R-EX-10 | 旧学生端接口文档 | 学生端相关页 | 学生端相关接口 | 所有 student_id 归属表 | TC-EX-AUTH-001 | 已完成 |
| R-AIQ-01 | 旧学生端接口文档 | `/student/ai-questions` | `POST /student/ai-questions/generate` | `ai_question_sessions`,`questions` | TC-AIQ-GEN-001 | 已完成 |
| R-AIQ-02 | 旧学生端接口文档 | `/student/ai-questions` | `POST /student/ai-questions/generate` | `ai_question_sessions` | TC-AIQ-PARAM-001 | 已完成 |
| R-AIQ-03 | 旧学生端接口文档 | `/student/ai-questions/history` | `GET /student/ai-questions` | `ai_question_sessions` | TC-AIQ-LIST-001 | 已完成 |
| R-AIQ-04 | 旧学生端接口文档 | `/student/ai-questions/answer` | `POST /student/ai-questions/submit` | `ai_question_records`,`ai_question_record_items` | TC-AIQ-SUBMIT-001 | 已完成 |
| R-AIQ-05 | 旧学生端接口文档 | `/student/ai-questions/analysis/:recordId` | `GET /student/ai-questions/{recordId}/analysis` | `ai_question_record_items` | TC-AIQ-ANALYSIS-001 | 已完成 |
| R-AIQ-06 | 旧学生端接口文档 | `/student/ai-questions/history` | `GET /student/ai-questions` | `ai_question_sessions` | TC-AIQ-METRIC-001 | 已完成 |
| R-AIQ-07 | 旧软件开发与说明文档 | `/student/ai-questions` | AI 服务内部流程 | `wrong_book`,`teacher_suggestions`,`knowledge_chunks` | TC-AIQ-CTX-001 | 已完成 |
| R-AIQ-08 | 旧学生端表结构 | `/student/ai-questions` | `POST /student/ai-questions/generate` | `questions.source=AI_GENERATED` | TC-AIQ-SOURCE-001 | 已完成 |
| R-TCH-01 | 旧软件开发与说明文档 | `/teacher/knowledge` | `POST /teacher/knowledge/documents` | `documents` | TC-TCH-UPLOAD-001 | 已完成 |
| R-TCH-02 | 旧软件开发与说明文档 | `/teacher/knowledge` | `GET /teacher/knowledge/documents` | `documents.status` | TC-TCH-STATUS-001 | 已完成 |
| R-TCH-03 | 旧软件开发与说明文档 | `/teacher/knowledge` | 上传后异步处理流水线（内部契约） | `documents`,`knowledge_chunks`,`job_runs` | TC-TCH-PIPELINE-001 | 未开始 |
| R-TCH-04 | 旧软件开发与说明文档 | `/teacher/knowledge` | `DELETE /teacher/knowledge/documents/{documentId}` | `documents`,`knowledge_chunks` | TC-TCH-DEL-001 | 已完成 |
| R-TCH-05 | 旧软件开发与说明文档 | `/teacher/plans` | `POST /teacher/plans/generate` | `lesson_plans` | TC-TCH-PLAN-GEN-001 | 已完成 |
| R-TCH-06 | 旧软件开发与说明文档 | `/teacher/plans` | `GET/PUT/DELETE /teacher/plans*`, `GET /teacher/plans/{planId}/export` | `lesson_plans` | TC-TCH-PLAN-CRUD-001 | 已完成 |
| R-TCH-07 | 旧软件开发与说明文档 | `/teacher/analytics` | `GET /teacher/students/{studentId}/analytics` | `exercise_records`,`wrong_book`,`teacher_student_bindings` | TC-TCH-ANA-001 | 未开始 |
| R-TCH-08 | 旧软件开发与说明文档 + 旧学生端接口文档 | `/teacher/suggestions` + 学生解析页/AI出题页 | `POST /teacher/suggestions` + 解析/出题相关查询接口 | `teacher_suggestions` | TC-TCH-SUG-001, TC-TCH-SUG-LINK-001 | 已完成 |
| R-TCH-09 | 旧软件开发与说明文档 | `/teacher/plans` | `POST /teacher/plans/{planId}/share` | `lesson_plans.share_token` | TC-TCH-PLAN-SHARE-001 | 已完成 |
| R-ADM-01 | 旧软件开发与说明文档 | `/admin/users` | `GET/POST/PATCH /admin/users*` | `users` | TC-ADM-USER-001 | 已完成 |
| R-ADM-02 | 旧软件开发与说明文档 | `/admin/audits` | `GET /admin/audits` | `audit_logs` | TC-ADM-AUDIT-001 | 已完成 |
| R-ADM-03 | 旧软件开发与说明文档 | `/admin/resources` | `GET /admin/resources`, `GET /admin/resources/{resourceId}/download` | `lesson_plans`,`questions`,`documents` | TC-ADM-RES-001 | 已完成 |
| R-ADM-04 | 旧软件开发与说明文档 | `/admin/dashboard` | `GET /admin/dashboard/metrics` | 聚合查询 | TC-ADM-DASH-001 | 已完成 |
| R-PLT-01 | 旧软件开发与说明文档 | N/A | 环境启动文档 | `.env`,`docker-compose` | TC-PLT-DEPLOY-001 | 已完成 |
| R-PLT-02 | 旧软件开发与说明文档 | N/A | 架构设计约束 | 技术栈清单 | TC-PLT-STACK-001 | 已完成 |
| R-PLT-03 | 新增最佳实践 | 全部页面 | 全部接口 | 统一响应体 | TC-PLT-RESP-001 | 已完成 |
| R-PLT-04 | 新增最佳实践 | N/A | 日志/追踪配置 | `audit_logs`+服务日志 | TC-PLT-OBS-001 | 已完成 |
| R-PLT-05 | `12-内部服务契约与异步任务规范` | N/A | API -> AI Service 内部接口 | `job_runs`,`idempotency_keys` | TC-PLT-CONTRACT-001 | 未开始 |
| R-PLT-06 | `13-测试策略与质量门禁` | 全部页面 | 全部接口 | 测试报告/覆盖率工件 | TC-PLT-QUALITY-001 | 未开始 |
| R-PLT-07 | `13-测试策略与质量门禁` | N/A | CI/CD Pipeline | CI 配置与发布工件 | TC-PLT-CICD-001 | 未开始 |
| R-PLT-08 | `13-测试策略与质量门禁` | N/A | 安全扫描门禁 | 安全扫描报告 | TC-PLT-SEC-001 | 未开始 |
| R-PLT-09 | `14-前端实现规范与设计系统约束` | 全部业务页面 | BFF/API 交互层 | 组件库与前端状态模型 | TC-PLT-FE-001 | 未开始 |
| R-PLT-10 | `09-配置与环境变量规范` | N/A | AI 服务启动脚本 | Python 环境与依赖锁文件 | TC-PLT-PYENV-001 | 未开始 |

## 里程碑门禁

1. 里程碑 M1（学生主链路）：R-AUTH、R-CHAT、R-EX、R-AIQ。
2. 里程碑 M2（教师主链路）：R-TCH-01~09。
3. 里程碑 M3（管理主链路）：R-ADM-01~04。
4. 里程碑 M4（工程质量）：R-PLT-05~10。
5. 项目完结：全部 in-scope 需求状态为 `已验收`。

---
文档状态：`v1.2.0`（2026-02-26 修正教师需求映射偏移，新增 R-PLT-05~10 追踪项）
